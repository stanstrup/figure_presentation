# Text Sizing {background-color="#1abc9c"}

```{r}
#| label: setup-sizing
#| echo: false
#| eval: true
#| message: false
#| warning: false

library(ggplot2)
library(patchwork)

# Create the base plot used throughout
p <- ggplot(mtcars, aes(wt, mpg, color = factor(cyl))) +

  geom_point(size = 2) +
  geom_smooth(method = "lm", se = FALSE) +
  labs(x = "Weight (1000 lbs)", y = "Miles per Gallon",
       color = "Cylinders") +
  theme_classic()
```

## The Key Insight

::: {.callout-important}
## The Smart Way to Control Text Size

**Don't manually set font sizes for every element!**

Instead, use **smaller figure dimensions** to make text appear larger relative to the plot.

Then use **vector formats (SVG/PDF)** for infinite resolution.

:::

## Visual Demonstration

```{r}
#| label: sizing-demo-generate
#| echo: false
#| eval: true
#| output: false

# Save at different sizes to demonstrate the effect
ggsave("sources/sizing_small.svg", p, width = 3.5, height = 3)
ggsave("sources/sizing_large.svg", p, width = 7, height = 6)
```

::: {.columns}
::: {.column width="50%"}
**Small canvas (3.5 Ã— 3 inches)**

![](sources/sizing_small.svg){width="100%"}

Text appears **large** relative to plot

```{r}
#| label: sizing-demo-generate2
#| echo: true
#| eval: false
#| code-overflow: wrap

ggsave("sizing_small.svg", p,
       width = 3.5, height = 3)
```

:::

::: {.column width="50%"}
**Large canvas (7 Ã— 6 inches)**

![](sources/sizing_large.svg){width="100%"}

Text appears **small** relative to plot

```{r}
#| label: sizing-demo-generate3
#| echo: true
#| eval: false
#| code-overflow: wrap

ggsave("sizing_large.svg", p,
       width = 7, height = 6)
```

:::
:::

## Why This Works

::: {.columns}
::: {.column width="50%"}
**Smaller canvas:**

- Text size is fixed (e.g., 12pt)
- Canvas is small (3.5 Ã— 3)
- Text takes up more space relative to plot
- Points and lines stay proportional
:::

::: {.column width="50%"}
**Larger canvas:**

- Same text size (12pt)
- Canvas is large (10 Ã— 8)
- Text looks tiny relative to plot
- Same points and lines, more whitespace
:::
:::

## The Zoom Fallacy

**Wrong approach:**

::: {.incremental}
1. Create plot with default sizes
2. Text too small in document
3. Zoom/resize entire image 200%
4. **Result**: Huge points/lines, barely larger text ðŸ˜ž
:::

## Why Zooming Fails

::: {.columns}
::: {.column width="50%"}
**When you resize image:**

- Points: 2Ã— larger
- Lines: 2Ã— thicker
- Text: only slightly larger
- Proportions: all wrong
:::

::: {.column width="50%"}
**Correct approach:**

- Set final dimensions first
- Use width/height to scale ALL elements
- Let dimensions control text size
:::
:::

## The Right Workflow

::: {.callout-tip}
## Three-Step Process

1. **Set dimensions to match final output size**
   - Journal single column: ~3.5 inches (Always check specific journal guidelines!)
   - Journal double column: ~7 inches
   - Presentation: ~10 inches

2. **Adjust `base_size` if needed**
   - Only fine-tune if text still too large/small

3. **Use appropriate format**
   - Vector (SVG, PDF) for publications - infinite resolution
   - Raster (PNG) with high DPI for specific requirements
:::

## Vector Graphics: Dimension Flexibility

::: {.callout-note}
## For Vector Formats (SVG, PDF)

**The absolute dimensions don't matter for final quality!**

Vector graphics scale infinitely. What matters is:

- **Aspect ratio** (width:height ratio)
- **Relative proportions** of plot elements

```r
# These create functionally identical vector graphics
ggsave("small.svg", p, width = 3.5, height = 3)   # Small canvas
ggsave("large.svg", p, width = 7, height = 6)     # Large canvas

# The difference: text appears larger in small.svg
```
:::




## DPI: Only for Raster Formats

::: {.callout-warning}
## DPI is ONLY relevant for raster images (PNG, JPEG, TIFF)

**Vector formats (SVG, PDF) ignore DPI!**

```r
# For vectors - DPI has no effect
ggsave("plot.svg", p, width = 5, height = 4, dpi = 300)   # DPI ignored
ggsave("plot.svg", p, width = 5, height = 4, dpi = 72)    # Same result!

# For raster - DPI controls pixel count
ggsave("plot.png", p, width = 5, height = 4, dpi = 300)   # 1500 Ã— 1200 pixels
ggsave("plot.png", p, width = 5, height = 4, dpi = 72)    # 360 Ã— 288 pixels
```

**DPI = Dots (pixels) Per Inch**

- Higher DPI = more pixels = higher resolution raster
- Vector graphics have **infinite resolution** regardless of DPI
:::

## Practical Example: Journal Figure

```{r}
#| label: sizing-journal-demo
#| echo: true
#| eval: false

library(ggplot2)

# Create your plot with default theme
p <- ggplot(mtcars, aes(wt, mpg, color = factor(cyl))) +
  geom_point(size = 2) +
  geom_smooth(method = "lm", se = FALSE) +
  labs(x = "Weight (1000 lbs)", y = "Miles per Gallon",
       color = "Cylinders") +
  theme_classic()

# STEP 1: Save at journal single-column width (3.5 inches)
# Text will appear appropriately large!
ggsave("figure1.svg", p, width = 3.5, height = 3)

# STEP 2: If text still too small/large, adjust base_size
p2 <- p + theme_classic(base_size = 10)  # Slightly smaller base
ggsave("figure1_v2.svg", p2, width = 3.5, height = 3)
```

## base_size Effect

```{r}
#| label: base-size-demo-generate
#| echo: false
#| eval: true
#| output: false

# Save with different base_size values
ggsave("sources/sizing_base8.svg", p + theme_classic(base_size = 8), width = 3.5, height = 3)
ggsave("sources/sizing_base11.svg", p + theme_classic(base_size = 11), width = 3.5, height = 3)
ggsave("sources/sizing_base14.svg", p + theme_classic(base_size = 14), width = 3.5, height = 3)
```

::: {.columns}
::: {.column width="33%"}
**base_size = 8**

![](sources/sizing_base8.svg){width="100%"}
:::

::: {.column width="33%"}
**base_size = 11 (default)**

![](sources/sizing_base11.svg){width="100%"}
:::

::: {.column width="33%"}
**base_size = 14**

![](sources/sizing_base14.svg){width="100%"}
:::
:::

Same dimensions (3.5 Ã— 3), different text scaling!

## Minimum Font Sizes

**Rule of thumb for print:**

- Minimum readable: **6-8 pt**
- Comfortable reading: **10-12 pt**
- Titles: **14-16 pt**

::: {.fragment}
**Test**: Print at actual size (not "fit to page")!
:::

## The base_size Parameter

```{r}
#| label: sizing-base-size
#| echo: true
#| eval: false

# base_size sets the base text size in pts
theme_classic(base_size = 12)

# Other elements scale relative to base_size:
# - axis.title: 1.1Ã— base_size
# - axis.text: 0.8Ã— base_size
# - legend.text: 0.8Ã— base_size

# Use base_size as your PRIMARY adjustment
# Only customize individual elements if really needed
```

## When to Manually Set Sizes

Only after trying dimensions first:

```{r}
#| label: sizing-manual-override
#| echo: true
#| eval: false

# If you MUST fine-tune individual elements:
p + theme_classic(base_size = 11) +
  theme(
    axis.title = element_text(size = 12),
    axis.text = element_text(size = 10),
    legend.text = element_text(size = 10)
  )
```

But usually just adjusting `width`, `height`, and `base_size` is enough!

## Common Sizing Mistakes

::: {.columns}
::: {.column width="50%"}
**âŒ Bad**

```{r}
#| label: sizing-bad-example
#| echo: true
#| eval: false

p <- ggplot(mtcars, aes(wt, mpg)) +
  geom_point()

# Save at random large size
ggsave("plot.svg", p,
       width = 10, height = 8)

# Then resize in Word/PowerPoint
# Text becomes tiny!
```
:::

::: {.column width="50%"}
**âœ… Good**

```{r}
#| label: sizing-good-example
#| echo: true
#| eval: false

p <- ggplot(mtcars, aes(wt, mpg)) +
  geom_point() +
  theme_classic(base_size = 11)

# Save at FINAL size
ggsave("plot.svg", p,
       width = 3.5, height = 3)

# No resizing needed!
```
:::
:::

## Designing for Multiple Outputs

```{r}
#| label: sizing-multiple-outputs
#| echo: true
#| eval: false

# Create base plot
p <- ggplot(mtcars, aes(wt, mpg)) + geom_point()

# For paper (small, high detail) - use vector
ggsave("paper.svg", p + theme_classic(base_size = 11),
       width = 3.5, height = 3)

# For presentation (large, readable from distance)
ggsave("slides.svg", p + theme_classic(base_size = 18),
       width = 10, height = 7)
```

Different outputs need different sizes!

## Aspect Ratio Matters

```{r}
#| label: sizing-aspect-ratio
#| echo: true
#| eval: false

# Wide plots for time series
ggsave("timeseries.svg", width = 8, height = 4)

# Square for correlation plots
ggsave("correlation.svg", width = 5, height = 5)

# Tall for many categories
ggsave("categories.svg", width = 5, height = 8)
```

Choose dimensions based on data structure!

## Multi-Panel Figures

```{r}
#| label: sizing-multi-panel
#| echo: true
#| eval: false

library(patchwork)

p1 <- ggplot(mtcars, aes(wt, mpg)) + geom_point() +
  theme_classic(base_size = 10)

p2 <- ggplot(iris, aes(Sepal.Length, Sepal.Width)) + geom_point() +
  theme_classic(base_size = 10)

combined <- p1 + p2

# Size for final combined figure
ggsave("figure1.svg", combined, width = 7, height = 3.5)

# Each subplot is now 3.5 Ã— 3.5 inches
# with 10pt text - readable!
```

## Testing Readability

::: {.incremental}
1. **Print at actual size** (100%, not "fit to page")
2. **View PDF at 100% zoom** (not zoomed in/out)
3. **Ask**: Can I comfortably read axis labels?
4. **Check**: Are labels too large/small relative to plot area?
:::

## Working Backwards from Requirements

::: {.callout-tip}
## Design Process

1. **Find out final size** (journal specs, poster dimensions)
2. **Determine minimum font size** (usually 8-10 pt for print)
3. **Set dimensions** to target width
4. **Adjust base_size** if needed to achieve minimum readable text
5. **Test**: Print at actual size
6. **Fine-tune** if necessary
:::

## Key Takeaways

::: {.callout-important}
## Remember

1. **Use DIMENSIONS to control text size** - not manual font sizes
2. **Small dimensions = larger relative text**
3. **Save at FINAL output size** from the start
4. **Use base_size** for fine-tuning (not individual elements)
5. **Vector formats** for publications (SVG, PDF)
6. **DPI only matters** for raster formats (PNG, TIFF)
7. **PRINT TEST** at actual size before submission
:::
