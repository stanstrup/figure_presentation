# Text and Element Sizing {background-color="#1abc9c"}

```{r}
#| label: setup-sizing
#| echo: false
#| eval: true
#| message: false
#| warning: false

library(ggplot2)
library(patchwork)
library(glue)

# Output directory
fig_dir <- "plots/04_sizing"

# Create the base plot used throughout
p <- ggplot(mtcars, aes(wt, mpg, color = factor(cyl))) +

  geom_point(size = 2) +
  geom_smooth(method = "lm", se = FALSE) +
  labs(x = "Weight (1000 lbs)", y = "Miles per Gallon",
       color = "Cylinders") +
  theme_classic()
```

## The Key Insight

::: {.callout-important}
## The Smart Way to Control Text Size

**Don't manually set font sizes for every element!**

Instead, use **smaller figure dimensions** to make text appear larger relative to the plot.

Then use **vector formats (SVG/PDF)** for infinite resolution.

:::

## Visual Demonstration

```{r}
#| label: sizing-demo-generate
#| echo: false
#| eval: true
#| output: false

# Save at different sizes to demonstrate the effect
ggsave(glue("{fig_dir}/sizing_small.svg"), p, width = 3.5, height = 3)
ggsave(glue("{fig_dir}/sizing_large.svg"), p, width = 7, height = 6)
```

::: {.columns}
::: {.column width="50%"}
**Small canvas (3.5 × 3 inches)**

![](plots/04_sizing/sizing_small.svg){width="100%"}

Text appears **large** relative to plot

```{r}
#| label: sizing-demo-generate2
#| echo: true
#| eval: false
#| code-overflow: wrap

ggsave("sizing_small.svg", p,
       width = 3.5, height = 3)
```

:::

::: {.column width="50%"}
**Large canvas (7 × 6 inches)**

![](plots/04_sizing/sizing_large.svg){width="100%"}

Text appears **small** relative to plot

```{r}
#| label: sizing-demo-generate3
#| echo: true
#| eval: false
#| code-overflow: wrap

ggsave("sizing_large.svg", p,
       width = 7, height = 6)
```

:::
:::


## base_size Effect (theme_classic(base_size = x))

```{r}
#| label: sizing-journal-demo
#| echo: false
#| eval: true

library(ggplot2)

# Create your plot with default theme
p <- ggplot(mtcars, aes(wt, mpg, color = factor(cyl))) +
  geom_point(size = 2) +
  geom_smooth(method = "lm", se = FALSE) +
  labs(x = "Weight (1000 lbs)", y = "Miles per Gallon",
       color = "Cylinders") +
  theme_classic()

# STEP 1: Save at journal single-column width (3.5 inches)
# Text will appear appropriately large!
ggsave(glue("{fig_dir}/figure1.svg"), p, width = 3.5, height = 3)

# STEP 2: If text still too small/large, adjust base_size
p2 <- p + theme_classic(base_size = 10)  # Slightly smaller base
ggsave(glue("{fig_dir}/figure1_v2.svg"), p2, width = 3.5, height = 3)
```

```{r}
#| label: base-size-demo-generate
#| echo: false
#| eval: true
#| output: false

# Save with different base_size values
ggsave(glue("{fig_dir}/sizing_base8.svg"), p + theme_classic(base_size = 8), width = 3.5, height = 3)
ggsave(glue("{fig_dir}/sizing_base11.svg"), p + theme_classic(base_size = 11), width = 3.5, height = 3)
ggsave(glue("{fig_dir}/sizing_base14.svg"), p + theme_classic(base_size = 14), width = 3.5, height = 3)
```

::: {.columns}
::: {.column width="33%"}
**base_size = 8**

![](plots/04_sizing/sizing_base8.svg){width="100%"}
:::

::: {.column width="33%"}
**base_size = 11 (default)**

![](plots/04_sizing/sizing_base11.svg){width="100%"}
:::

::: {.column width="33%"}
**base_size = 14**

![](plots/04_sizing/sizing_base14.svg){width="100%"}
:::
:::

**Other elements scale relative to base_size:**

- `axis.title`: `1.1× base_size`
- `axis.text`: `0.8× base_size`
- `legend.text`: `0.8× base_size`

Use base_size as the PRIMARY adjustment - only customize individual elements if needed



## The Right Workflow

::: {.callout-tip}
## Three-Step Process

1. **Set dimensions to match final output size**
   - Journal single column: ~3.5 inches (Always check specific journal guidelines!)
   - Journal double column: ~7 inches
   - Presentation: ~10 inches

2. **Adjust `base_size` if needed**
   - Only fine-tune if text still too large/small

3. **Adjust individual elements if needed**
   - Use `theme()` to customize specific text sizes
   - Only if steps 1-2 don't achieve desired result
:::


### Why This Works

- Text/points/lines have **fixed** sizes
- If the canvas is small they appear larger



## When you must adjust some sizes individually


```{r}
#| label: sizing-manual-generate
#| echo: false
#| eval: true
#| output: false

# Without manual theme adjustments
p_default <- ggplot(mtcars, aes(wt, mpg, color = factor(cyl))) +
  geom_point(size = 2) +
  labs(x = "Weight (1000 lbs)", y = "MPG", color = "Cyl") +
  theme_classic(base_size = 11)

# With manual theme adjustments
p_custom <- p_default +
  theme(
        axis.title = element_text(size = 14, face = "bold"),
        axis.text =  element_text(size = 12),
        legend.title = element_text(size = 12, face = "bold"),
        legend.text =  element_text(size = 11)
  )

ggsave(glue("{fig_dir}/sizing_default_theme.svg"), p_default, width = 4, height = 3)
ggsave(glue("{fig_dir}/sizing_custom_theme.svg"), p_custom, width = 4, height = 3)
```

::: {.columns}
::: {.column width="50%"}
**Default (base_size = 11)**

![](plots/04_sizing/sizing_default_theme.svg){width="100%"}

```{r}
#| label: sizing-default-code
#| echo: true
#| eval: false
#| code-overflow: wrap

p + theme_classic(base_size = 11)
```
:::

::: {.column width="50%"}
**With manual adjustments**

![](plots/04_sizing/sizing_custom_theme.svg){width="100%"}

```{.r .code-clip}
p + theme_classic(base_size = 11) +
  theme(
    axis.title   = element_text(size = 14, face = "bold"),
    axis.text    = element_text(size = 12),
    legend.title = element_text(size = 12, face = "bold"),
    legend.text  = element_text(size = 11)
  )
```
:::
:::




## Vector vs Raster: Key Differences

::: {.columns}
::: {.column width="50%"}
::: {.callout-note}
## Vector Formats (SVG, PDF)

**Dimensions control text/element proportions, not quality!**

- Scale infinitely without quality loss
- **DPI is ignored**
- What matters: aspect ratio & relative proportions
:::

```{.r style="font-size: 1.1em;"}
# Text larger in small.svg
ggsave("small.svg", p,
       width = 3.5, height = 3)
ggsave("large.svg", p,
       width = 7, height = 6)
```
:::

::: {.column width="50%"}
::: {.callout-warning}
## Raster Formats (PNG, TIFF)

**DPI controls pixel count and quality!**

- Fixed resolution, can pixelate when scaled
- **DPI matters** (300+ for print)
- pixels = width × DPI
:::

```{.r style="font-size: 1.1em;"}
# 1500×1200 pixels
ggsave("plot.png", p,
       width = 5, height = 4, dpi = 300)
# 360×288 pixels
ggsave("plot.png", p,
       width = 5, height = 4, dpi = 72)
```
:::
:::
